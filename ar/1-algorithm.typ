#set document(author: "M. E. Abdelsalam", title: "CS-Keys", keywords: "algorithms")
#set page(paper: "iso-b5")
#set text(
  font: "Noto Sans Arabic",
  size: 12pt,
  dir: rtl
)
#set par(justify: true, leading: 1em, spacing: 2em)
#show heading: set block(below: 1.5em, above: 2.0em)

#set align(center)
= مقدمة في الخوارزميات
#set align(right)

كل مجموعة من الخطوات المتتالية المعنية لتحقيق هدف واضح، سُميت "خوارزم"؛ والخوارزم بذلك المعنى ليس جديدا على البشر، فيمكن النظر إلى كل صنعة وفن كمجموعة من الخوارزميات التي تتناقلها الأمم جيلا بعد جيل؛ فالتحطيب، وإيقاد النار، وإعداد الشاي جميعها خوارزميات في مضمونها، وتسميت أو التعريف بكل خطوة من خطواتها يعد فنا بذاته، وهو فن "تصميم الخوارزميات".

بغض النظر عن معنى "المعرفة" والنظرية الفلسفية المعروفة، يمكننا النظر إلى الخوارزم كما ذكرنا على أنه وسيلة لنقل معرفتنا بحلول المسائل المنطقية والجبرية إلى الآلة، أو بتعبير آخر هو وصف لكيفية إملاء الأوامر للآلة الرقمية؛ فإن علمت ذلك، فاعلم أن لفظ - خوارزم - وضع على وجه الخصوص ليدل على ذات المعنى - نقل المعرفة - بين البشر والآلة، فصار بنفسه فنًّا وفرعا من علوم الحاسوب، تؤلف له الكتب، وتصنف له المجلدات للنظر في صفاته وكيفيته.

وصفاته العكسية ثلاث: التكلفة، والتكلف، والمجانبة، أو لو شئت فقل صفاته: الكفاءة، والبساطة، والإرشاد؛ فيحبذ للخوارزم أي يكون قليل التكلفة باحتوائه على أقل كم من الخطوات (الأوامر)، غير متكلف بأن يكون سلسا في قراءته سهلا في تطبيقه على مستوى الآلة، أقل مجانبة للصواب بأن يؤدي إلى نتائج هي أقرب إلى الصواب إن لم تصبه.

وأما كيفيته فلا تُعرّف إلا بتعريف المسألة المطلوب حلها أو الهدف المراد تحقيقه؛ وتعريف المسألة هو تحديد جميع مدخلاتها الممكنة ونوعية النواتج المتوقعة؛ فمثلا مسألة إيجاد الوسيط (وهو الرقم الواقع في منتصف مجموعة مرتبة من الأرقام)، يمكن تعريفها كالآتي:

*المسألة:* إيجاد الوسيط \
*المدخلات:* مجموعة مرتبة، تصاعديا أو تنازيا، من الأرقام \
*النواتج:* مجموعة مكونة من الرقم الوسيط أو الرقمين \

وعليه، يتم وصف وتصميم الخوارزم؛ ويكون ذلك التصميم أو الوصف بأي لغة ممكنة، فيجوز تصميم الخوارزميات بلغة اللسان (كالعربية أو الإنجليزية)، أو بلغة مشفرة ذات قواعد محددة ومعدودة يسهل ترجمتها آليا إلى لغة الآلة التي حروفها تقتصر على رَسْمَين فقط: الصفر والواحد، أو بمزيج بينهما، فيكون الوصف مشفرا بعض الشيء، باستخدام رموز خارج حروف الأبجدية تفيد الإيجاز، كقولك `س = 5, ص = 7` بدلا من "_س_ متغير قيمته تساوي 5 و _ص_ تساوي 7".

عند التعبير عن الخوارزميات بلغة اللسان يميل المصمم إلى الإجمال لا التفصيل، أما اللغة المشفرة فيكون التفصيل مفروضا لا مفر منه؛ والتفكر في الحل إجمالا يوهمك بصوابه (يزيد من المجانبة)، والإنغماس في التفصيل يقودك إلى حلول مكلفة أو متكلفة؛ لذلك الأرجح أن ينتقل المصمم من الإجمال إلى التفصيل تارة ومن التفصيل إلى الإجمال تارة حتى يصل لأفضل حل قياسا على الصفات الثلاث.

فمثلا، يمكنك التفكير في مسألة إيجاد الوسيط إجمالا فتقول (افتراضا): يمكن الوصول للحل آليا بجعل الآلة تقارن كل رقم بالمجموعة بسائر الأرقام وترصد - لكل رقم - عدد الأرقام الأصغر والأكبر، وبذلك تصل إلى النتيجة بمقارنة العددين المرصدين فإن تساوا كان ذلك الرقم هو الوسيط؛ ولكن فور كتابة الحل تفصيلا كالآتي...

*الخوارزم:* إيجاد الوسيط لمجموعة فردية \
*المدخلات:* مجموعة مرتبة من عدد فردي من الأرقام. \
*النواتج:* الرقم الوسيط \
*الخطوات:* \
- لكل رقم _أ_ في المجموعة قم بالآتي: \
  - _س_ = 0 و _ص_ = 0 \
  - لكل رقم _ب_ في المجموعة قم بالآتي: \
    - لو _أ_ أصغر من _ب_ أضف واحد إلى _س_ \
    - لو _أ_ أكبر من _ب_ أضف واحد إلى _ص_ \
  - لو _س_ تساوي _ص_ إذا الرقم الوسيط هو _أ_ \

... تلاحظ خللين بالحل المزعوم: أما الأول فتكلفته والثاني أنه غير صحيح!

أما التكلفة فسببها وقوف الآلة على كل رقم بالمجموعة أكثر من مرة، مرة عند مقارنته بسائر الأرقام، ومرات عدة عند مقارنة سائر الأرقام به؛ فلو أدخلنا مجموعة من مئة رقم صارت الآلة تنفذ أكثر من عشرة آلاف أمر (خطوة)؛ أما المجانبة فسببها الإعتماد على المقارنة المذكورة وهي ليست من تعريف الوسيط؛ فالحل الصحيح والأفضل هو حساب عدد عناصر المجموعة ومن ثم الإتيان بالعنصر الأوسط بطرح واحد من عدد العناصر ثم القسمة على اثنين.

== مسائل جدولة الوظائف

مسألة الوسيط سهلة نسبيا والخطأ فيها مستبعد، فما ذكرنا الحل الساذج مسبقا إلا على وجه الإفتراض لدواعي الشرح والتبسيط؛ أما "جدولة الوظائف" فهي نوع من المسائل المشهورة في الخوارزميات، وأفضل حل لها غير معروف بالبديهة ويتطلب التأمل والتفكير.

*المسألة:* إيجاد أكبر مجموعة من الوظائف غير المتداخلة \
*المدخلات:* مجموعة من الفترات، كل فترة تمثل زمن بدء ونهاية وظيفة ما \
*النواتج:* أكبر مجموعة ممكنة لفترات غير متداخلة \

يمكنك النظر إلى تلك الوظائف على صورة فترات، كل منها تحتوي على نقطتين على خط الزمان، الأولى تمثل زمن البدء والأخرى زمن الإنتهاء؛ بعض تلك الفترات متداخلة فإن اخترت فترة واحدة منهم أخرجت بذلك الباقي المتداخل معها من قائمة الإختيارات؛ وبذلك يمكن وصف المسألة كالآتي: إيجاد أكبر عدد من الإختيارات الممكن اتخاذها قبل إخلاء قائمة الإختيارات بالكامل.

#box()[
  #box(width: 100%, height: 66pt, stroke: 1pt + rgb("#00000099"))[
    #place(dx: -5pt, dy: 10pt, line(length: 15%, stroke: 3pt + gray))
    #place(dx: -37%, dy: 10pt, line(length: 30%, stroke: 3pt + gray))
    #place(dx: -78%, dy: 10pt, line(length: 15%, stroke: 3pt + gray))

    #place(dx: -19%, dy: 25pt, line(length: 12%, stroke: 3pt + gray))
    #place(dx: -58%, dy: 25pt, line(length: 16%, stroke: 3pt + gray))

    #place(dx: -40pt, dy: 40pt, line(length: 15%, stroke: 3pt + gray))
    #place(dx: -40%, dy: 40pt, line(length: 23%, stroke: 3pt + gray))
    #place(dx: -70%, dy: 40pt, line(length: 20%, stroke: 3pt + gray))

    #place(dx: -40pt, dy: 55pt, line(length: 22%, stroke: 3pt + gray))
    #place(dx: -75%, dy: 55pt, line(length: 24%, stroke: 3pt + gray))
  ]
  #align(center)[
    #block(above: 0.75em)[
      #text("مثال من المدخلات لمسألة الوظائف المتداخلة", fill: rgb("#00000099"), size: 10pt) \
      #text("اتجاه خط الزمان من اليمين إلى اليسار", fill: rgb("#00000099"), size: 10pt)
    ]
  ]
]

أول حل قد يخطر بالبال: اختيار الصغير من الفترات، فكلما طالت الفترة عظمت نسبة التداخل بينها وبين سائر الفترات؛ وعليه يكون الخوارزم كالآتي:

*الخوارزم:* اختيار الفترات القصيرة \
*المدخلات:* مجموعة من الفترات \
*النواتج:* أكبر مجموعة ممكنة لفترات غير متداخلة \
*الخطوات:* \
- _ن_ = مجموعة خالية
- قم بترتيب المجموعة ترتيبا تصاعديا \
- لكل فترة _ف_ في المجموعة المرتبة:
  - ضف _ف_ إلى _ن_ \
  - _م_ = مجموعة الفترات المتداخلة مع _ف_ \
  - أزل _ف_ وكل عناصر _م_ من المجموعة المرتبة \
- الناتج = _ن_ \

#box()[
  #box(width: 100%, height: 66pt, stroke: 1pt + rgb("#00000099"))[
    #place(dx: -5pt, dy: 10pt, line(length: 15%, stroke: 3pt + green))
    #place(dx: -37%, dy: 10pt, line(length: 30%, stroke: 3pt + gray))
    #place(dx: -78%, dy: 10pt, line(length: 15%, stroke: 3pt + green))

    #place(dx: -19%, dy: 25pt, line(length: 12%, stroke: 3pt + green))
    #place(dx: -58%, dy: 25pt, line(length: 16%, stroke: 3pt + green))

    #place(dx: -40pt, dy: 40pt, line(length: 15%, stroke: 3pt + gray))
    #place(dx: -40%, dy: 40pt, line(length: 23%, stroke: 3pt + gray))
    #place(dx: -70%, dy: 40pt, line(length: 20%, stroke: 3pt + gray))

    #place(dx: -40pt, dy: 55pt, line(length: 22%, stroke: 3pt + gray))
    #place(dx: -75%, dy: 55pt, line(length: 24%, stroke: 3pt + gray))
  ]
  #align(center)[
    #block(above: 0.75em)[
      #text("المجموعة الناتجة من تطبيق خوارزم الفترات القصيرة", fill: rgb("#00000099"), size: 10pt) \
      #text("اتجاه خط الزمان من اليمين إلى اليسار", fill: rgb("#00000099"), size: 10pt)
    ]
  ]
]

بالفعل أكبر عدد ممكن من الفترات - في هذا المثال - أربعة؛ ولذلك يبدو الخوارزم للوهلة الأولى فعال، وهو كذلك ولكن تشوبه شائبة واحدة فقط... أنه غير صحيح بالمرة!
خوارزم الفترات القصيرة غير مكلف ولا متكلف، ولكنه مجانب للصواب تماما؛ فانظر المدخلات التالية:

#box()[
  #box(width: 100%, height: 66pt, stroke: 1pt + rgb("#00000099"))[
    #place(dx: -5pt, dy: 10pt, line(length: 30%, stroke: 3pt + gray))

    #place(dx: -35%, dy: 25pt, line(length: 30%, stroke: 3pt + gray))

    #place(dx: -68%, dy: 40pt, line(length: 30%, stroke: 3pt + gray))

    #place(dx: -30%, dy: 55pt, line(length: 6%, stroke: 3pt + green))
    #place(dx: -63%, dy: 55pt, line(length: 6%, stroke: 3pt + green))
  ]
  #align(center)[
    #block(above: 0.75em)[
      #text("مثال من المدخلات يدحض خوارزم الفترات القصيرة", fill: rgb("#00000099"), size: 10pt) \
      #text("اتجاه خط الزمان من اليمين إلى اليسار", fill: rgb("#00000099"), size: 10pt)
    ]
  ]
]

خوارزم الفترات القصيرة يُفنّد تماما بوجود مدخلات بها القليل من الفترات الصغار غير متداخلة مع بعضها بعضا ولكن متداخلة مع الكثير من الفترات الطوال غير المتداخلة مع بعضها كذلك؛ وبذلك ينعت خوارزم الفترات القصيرة بكونه حلا خاصا للمسألة المذكورة، أي حل خصّ بعض مدخلات المسألة ولم يشمل جميعها، فلم يصب الحق تماما ولكنه جانبه بعض الشيء؛ أو كما يسمونه حل إرشادي "Heuristic".

لعلك تتساءل الآن: وما هو الحل العام لتلك المسألة؟... ولكنّ الأجدر السؤال بكيفية إثبات صحة الخوارزم من عدمها، حتى لا تتكرر زلة خوارزم الفترات القصيرة؛ وذلك أمر لو تعلم عظيم، فمسألة الفترات المتداخلة تلك ماهي إلا مثال، الخطأ فيه ليس بالأمر الجلل؛ ولكن ماذا لو كان الخطأ في خوارزم موضوع لجهاز تنظيم ضربات القلب؟ وماذا لو ترتب عليه وفاة حامل ذاك الجهاز؟... حينئذ لن ينجدك من المشنقة إلا أمر واحد... إثبات صحة الخوارزم الذي صممت.

نستكمل الكلام في كيفية إثبات صحة الخوارزميات وقياس مدى مجانبتها للصواب في مقالات لاحقة إن شاء الله؛ أما حل مسألة الفترات، فمخول إليك.
